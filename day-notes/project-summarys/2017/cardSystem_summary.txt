## create at  2018.1.8
## 卡牌系统

一、卡牌升星
		卡牌升星对应的条件
			1、英雄碎片
			2、金币(升级所需的金币)
			3、等级(英雄的等级)
		说明：
			金币：每次升星都需要消耗不同数量的金币
			等级:不同的星数对应的卡牌的级别是不同的。
			例如：我的“黑暗牧师”从2星升级到3星。
				需要的碎片：60
				金币：75000
				英雄等级：10级
		判断：
			1、卡牌等级是否已经大于或者等级英雄等级
			2、玩家是否有这张卡牌
			3、玩家的升级金币数量
			4、玩家的卡牌碎片数量
			5、玩家的卡牌等级
		更改：
			1、玩家的卡牌等级++
			2、玩家消耗的金币数量
			3、玩家消耗的卡牌碎片数量
			Currency map[int32]int64  key:itemId value:count   key:消耗的道具id value:消耗的对应道具的数量
二、货币兑换
	1、钻石换金币
	2、金币换钻石
	3、钻石购买技能点
	总结：
		1、check condition:
			购买次数是否达到上限
			玩家的兑换币是否充足
		2、值变化
			减去相应地金币或者钻石
			添加相应地金币或者钻石
		3、在“钻石换金币”的时候，页面显示的金币，是经过公式计算之后的值，不是直接从表里面读取的值
三、升级技能点

需要做的，找到技能点

1、技能点的最大值的次数与哪儿些值有关系
	1.1、体力的最大值和团队等级有关系
	1.2、升级卡牌的技能点应该与玩家的vip等级有关系。
	    vip等级	 技能点个数			团队等级	体力的最大值
	     0-3			10				1~60		120
	     >=4			20			      60		150
	1.3、升级卡牌技能点和哪儿些值有关系
	check condition:(检查的条件)
		1.3.1、技能点有没有解锁
		1.3.2、是否有足够的金币
		1.3.3、是否有足够的钻石(钻石是用来购买技能点的)
		1.3.3、是否还有可操作的技能点
		1.3.4、技能点等级是否是当前卡牌的等级

	update value:(要改变的值)
		1.3.5、消耗的金币数量
		1.3.6、卡牌增加的战力值(购买相应地技能点，卡牌会增加对应地战力值)--牵扯到的问题---购买技能点，如何更改战力
		
问题：
	1、程序里面，固定写死的技能点在哪里写的????
	结论：这个技能点的最大值，是由前端控制的，后端只需要判断这个值是否为0就可以了
	程序在初始化用户数据的时候，从csv.CLevelMap中根据定义的常量从表中找出这个初始值
	
	体力的最大值是addTeamExp的时候，来进行判断的，如果玩家的经验超过了这个时候卡牌经验的最大值，那么就会给这个字段赋值。
体力的最大值服务器保存了，在player.Vigour这个字段里面,但是，技能点的最大值客户端自己判断了，没有让服务器保存。
	原因：体力是可以累加的，但是技能点是有上限的，不能累加。所以，技能点是客户端来判断的，体力的最值服务器需要保存。。
	vip等级	技能点最大值
	0~3			10
	60+			20
	
	终于找到了表示技能点常量的值在哪里存放了，原来实在skill_const.go里面
	SkillPointMaxLimit :技能点的最大值(vip>=4)
	SkillPointMaxLimixLow: 技能点的最小值(vip:0~3)
	SkillPointVIPLevel : 技能点达到这个vip的时候，技能点的最大值会发生变化。
	
	保存体力值的最大值在哪里？？？？？？？？？？？？？
		在初始化用户数据的时候，从csv.CLevelMap中根据定义的常量从表中找出这个初始值。		
		玩家的体力值上限是从配置表里面读取的。level.csv里面的Vigour_Max
	
	
	
	2、购买技能点是如何计算战力的
		这个是和卡牌的方法结合在一起的，已经封装好的，代用cardl.UpdateFp(player,Fp)
	3、卡培升级技能点为什么还有开锁？------------------未解决
	4、卡牌升级技能点和品质还有关系？------------------未解决
	
四、卡牌培养
	卡牌培养：
		初级培养	高级培养	豪华培养
		培养丹		
		培养丹		金币
		培养丹		钻石
		
			
	
	

	
	  
	
	
		

	
疑问：
	1、比如在钻石购买金币的时候，页面显示的金币是经过公式计算之后的值
Diamond2Coin.csv里面,是根据玩家的购买次数，然后消耗不同的钻石，
在钻石换金币的时候，可能会有一个暴击。暴击的值是由相应地比例控制的。
	2、卡牌的技能点程序在哪里写死的
	3、升级卡牌技能走的是哪儿个接口  /card/upskill
	4、卡培升级技能点为什么还有开锁？------------------未解决
	5、卡牌升级技能点和品质还有关系？------------------未解决
	
	