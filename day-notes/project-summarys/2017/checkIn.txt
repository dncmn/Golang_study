## create at 2018.1.8
## 签到系统



签到系统每个月重置一次

每次签到一天，然后找到对应的奖励。
	签到的话，可以根据当天的日期找到签到的那一天。

如果补签的话，
	检验消耗钻石的数量够不够
	补签的话，找到补签的那一天的奖励item


剩余签到次数

1、正常情况下：
	判断是否翻倍
		player.VIP>=csv.CCheckInMap[id].DoubleLevel
	判断是否补签
	
补签：
	从没有签到的第一天开始，然后依次向后弥补
	页面上会显示“可补签”的字样
	如果有多天没有补签，那么页面上显示的就是第一个没有补签的，第一个补签过之后，然后在第二个签到的日期那里显示”可补签“的字样
累计签到：
	累计签到应该不走掉落表。直接从对应的数据表中读取，这个字段只能是越来越大。
	
	
	
	
正常签到的流程：(包含vip翻倍)
	1、点击签到
	2、判断是否已经签到
	3、从csv中找到签到的奖励
		判断是否是vip双倍奖励(在后面vip等级够了，奖励也不会重发)
	4、当天签到次数+1、累计签到次数加1
	5、对玩家添加奖励
	6、设置当天奖励已经领取
	
然而：
	1、第一次是签到，
			如果第一次包含双倍的话，那奖励就是双倍的
				
	2、以后的签到
			就是补签。
	
	
type TCheckIn struct{
	Done bool
	TotalCount int32
	Count int32
	VipTbl *bitset.BitSet // 表示当月vip翻倍的奖励中,玩家vip等级不够翻倍，但是当天vip翻倍了,那么这个值就会被清空。否则就是一个月一次清空
}
	
补签的流程：和正常签到是一样的。
	
	

vip翻倍是按照玩家当时签到的那个时候的vip等级来判断是否需要翻倍
疑问：比如vip3翻倍
	1、vip签到奖励翻倍：当时签到的时候是vip2但是如果充个钻石的话，vip等级立马就上去了。
		case1:
			正常签到：比如今天，当前签到我是vip2,vip等级还达不到。但是我充了钻石，vip等级立马上去。这时候可以领取翻倍的那一部分奖励吗？
			结论：当时等级不够，后来等级够了，这部分奖励是可以领取的
		case2:
			补签：比如我是vip0级，这个月的前几天，有几天我没有签到，但是有vip翻倍的。这时候我补签(vip等级达到了补签的条件)问：是否可以可以领取翻倍的那一部分奖励？
			结论：补签奖励可以翻倍
	2、如何区分”正常签到”和“补签”  /player/checkIn
			这里，在签到里面都是先从“当日签到”开始算起，然后如果玩家存在补签的情况，那么第二次访问这个接口就是重签了
	3、代码里面在补签的时候(前几天存在没有签到的情况),怎么开始检验这个玩家的创建时间？？？？？？？？？？？？
	
		
		
	
补签的流程：(补签需要消耗50个钻石) --- 从未签到的第一天开始
	1、点击补签
	2、检验
		是否已经签到过
		检验钻石数量是否够用
	3、从csv中找到签到的奖励
		判断是否是vip双倍奖励(在后面vip等级够了，奖励也不会重发)
	4、当天签到次数+1、累计签到次数加1
	5、对玩家添加奖励
	6、设置当天奖励已经领取
	
	
	
记录累计签到天数
	TotalCount
记录当月签到天数
	Count
记录当天是否已经签到：
	1、避免重复签到
记录vip双倍，但是当时vip等级还不够  如果这样置为1
	VipTbl   *bitset.BitSet   
	作用：就是在记录当天vip翻倍的时候用的到
记录累计签到奖励领取情况 -- 这个是记录累计签到奖励领取
	Rewards	*bitset.BitSet    



	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
		
		
		


