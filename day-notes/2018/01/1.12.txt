## day-notes


如何在战斗里面判断是否有合击技

在生成卡牌的时候,
	判断自己是否有合击技
	判断是否增加了其他卡牌的合击技能
xlog.Errorf("Unknow card[%d]", cardId)
再获取一个卡牌的时候就是获取的是TPlayerCard


在SkillSuper.xlsx中多了或者少了一行记录


1、添加卡牌的合击技
	在LiteCard里面重新添加了一个SkillSuper字段，这个字段，在调用card.Init之后,然后对这个字段进行了赋值操作。
	LiteCard中：  SkillSuper   向验证服务器发送这个字段
	TPlayerCard中： ActiveSuperSkill  在生成卡牌的时候，就可以判断这个卡牌有没有合击技或者激活其他卡牌的合击技能

在生成卡牌的时候发一下
	ActivateSuperSkill bool                  // 是否已经激活卡牌合击技能
	LiteCard 添加一个字段

卡牌强化：







bug:
	1、在单独对一个卡牌进行首饰强化的时候，使用“戒指强化精华橙”一次，然后，所有的卡牌都会发生一起的变化。
		原因：这不是一个bug，是我对规则没有理解，在使用大经验物品，升级的时候，如果用不完将会以小经验物品的形式来返回。
	2、在对装备或者首饰强化的时候,出现了等级上去了，但是与等级对应的经验没有上去？？？
		是规则就是这样，还是一个bug
	3、副本扫荡出错
	
	
	

	
	
	




1、check condition
	1、basic:玩家是否有当前卡牌
	2、装备或者首饰的等级不能超过卡牌的等级
	3、在强化时，判断战队等级是否满足条件
2、update value
	强化一次，强化五次。
	1级升2级，读的是2级的表
	
	强化一次：下一个等级的消耗(金币或者经验)
	强化五次：下一个等级再往后加五次的资源消耗(金币或者经验)
	
在强化技能的时候需要三个参数
param1:  id : cardId  ---卡牌id
param2:	step : enhancePlace-- 强化装备或者装饰的id
param3: times : 强化次数

疑问：
1、在强化时，暴击的比例是怎么控制的？
	解答：数值给的
2、在强化首饰的时候，强化经验道具是怎么扣的？？？
	解答：根据这个是随机的，因为是从map里面找出属于类型的道具，比如找出戒指，然后从戒指的几个强化道具中随机找出一个。
3、如果装备或者首饰强化到了最大值，程序该怎么处理？----也就是判断首饰经验已经满了，到时配置表的最大值了-----需要再看看
	解答：装被可能会超过最大值，因为存在暴击
		 首饰的话，强化之后的最大值是固定的
4、强化首饰需要什么额外的判定条件？
	
5、在升级的时候，比如使用“戒指强化精华橙-50”、“戒指强化精华紫-20”、“戒指强化精华蓝-10”
	添加50点经验，扣除升级需要的，如果还有剩余，就是转化为其他小的“戒指强化精华”
	转化是怎么转换的？？？？？？
	


	for _, ok := csv.CCardEnhanceLevelMap[card.StepEnhanceLevel[step-1]]; !ok; card.StepEnhanceLevel[step-1]-- {
			_, ok = csv.CCardEnhanceLevelMap[card.StepEnhanceLevel[step-1]]
	}
